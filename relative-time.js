var _DurationFormat_options,__defProp=Object.defineProperty,__name=(t,e)=>__defProp(t,"name",{value:e,configurable:!0}),__classPrivateFieldSet=function(t,e,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(t,i):a?a.value=i:e.set(t,i),i},__classPrivateFieldGet=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},ListFormatPonyFill=class{formatToParts(t){const e=[];for(const i of t)e.push({type:"element",value:i}),e.push({type:"literal",value:", "});return e.slice(0,-1)}};__name(ListFormatPonyFill,"ListFormatPonyFill");var ListFormat="undefined"!=typeof Intl&&Intl.ListFormat||ListFormatPonyFill,partsTable=[["years","year"],["months","month"],["weeks","week"],["days","day"],["hours","hour"],["minutes","minute"],["seconds","second"],["milliseconds","millisecond"]],twoDigitFormatOptions={minimumIntegerDigits:2},DurationFormat=class{constructor(t,e={}){_DurationFormat_options.set(this,void 0);let i=String(e.style||"short");"long"!==i&&"short"!==i&&"narrow"!==i&&"digital"!==i&&(i="short");let s="digital"===i?"numeric":i;const a=e.hours||s;s="2-digit"===a?"numeric":a;const n=e.minutes||s;s="2-digit"===n?"numeric":n;const r=e.seconds||s;s="2-digit"===r?"numeric":r;const o=e.milliseconds||s;__classPrivateFieldSet(this,_DurationFormat_options,{locale:t,style:i,years:e.years||"digital"===i?"short":i,yearsDisplay:"always"===e.yearsDisplay?"always":"auto",months:e.months||"digital"===i?"short":i,monthsDisplay:"always"===e.monthsDisplay?"always":"auto",weeks:e.weeks||"digital"===i?"short":i,weeksDisplay:"always"===e.weeksDisplay?"always":"auto",days:e.days||"digital"===i?"short":i,daysDisplay:"always"===e.daysDisplay?"always":"auto",hours:a,hoursDisplay:"always"===e.hoursDisplay?"always":"digital"===i?"always":"auto",minutes:n,minutesDisplay:"always"===e.minutesDisplay?"always":"digital"===i?"always":"auto",seconds:r,secondsDisplay:"always"===e.secondsDisplay?"always":"digital"===i?"always":"auto",milliseconds:o,millisecondsDisplay:"always"===e.millisecondsDisplay?"always":"auto"},"f")}resolvedOptions(){return __classPrivateFieldGet(this,_DurationFormat_options,"f")}formatToParts(t){const e=[],i=__classPrivateFieldGet(this,_DurationFormat_options,"f"),s=i.style,a=i.locale;for(const[s,n]of partsTable){const r=t[s];if("auto"===i[`${s}Display`]&&!r)continue;const o=i[s],l="2-digit"===o?twoDigitFormatOptions:"numeric"===o?{}:{style:"unit",unit:n,unitDisplay:o};e.push(new Intl.NumberFormat(a,l).format(r))}return new ListFormat(a,{type:"unit",style:"digital"===s?"short":s}).formatToParts(e)}format(t){return this.formatToParts(t).map(t=>t.value).join("")}};__name(DurationFormat,"DurationFormat"),_DurationFormat_options=new WeakMap;var durationRe=/^[-+]?P(?:(\d+)Y)?(?:(\d+)M)?(?:(\d+)W)?(?:(\d+)D)?(?:T(?:(\d+)H)?(?:(\d+)M)?(?:(\d+)S)?)?$/,unitNames=["year","month","week","day","hour","minute","second","millisecond"],isDuration=__name(t=>durationRe.test(t),"isDuration"),Duration=class{constructor(t=0,e=0,i=0,s=0,a=0,n=0,r=0,o=0){this.years=t,this.months=e,this.weeks=i,this.days=s,this.hours=a,this.minutes=n,this.seconds=r,this.milliseconds=o,this.years||(this.years=0),this.sign||(this.sign=Math.sign(this.years)),this.months||(this.months=0),this.sign||(this.sign=Math.sign(this.months)),this.weeks||(this.weeks=0),this.sign||(this.sign=Math.sign(this.weeks)),this.days||(this.days=0),this.sign||(this.sign=Math.sign(this.days)),this.hours||(this.hours=0),this.sign||(this.sign=Math.sign(this.hours)),this.minutes||(this.minutes=0),this.sign||(this.sign=Math.sign(this.minutes)),this.seconds||(this.seconds=0),this.sign||(this.sign=Math.sign(this.seconds)),this.milliseconds||(this.milliseconds=0),this.sign||(this.sign=Math.sign(this.milliseconds)),this.blank=0===this.sign}abs(){return new Duration(Math.abs(this.years),Math.abs(this.months),Math.abs(this.weeks),Math.abs(this.days),Math.abs(this.hours),Math.abs(this.minutes),Math.abs(this.seconds),Math.abs(this.milliseconds))}static from(t){var e;if("string"==typeof t){const i=String(t).trim(),s=i.startsWith("-")?-1:1,a=null===(e=i.match(durationRe))||void 0===e?void 0:e.slice(1).map(t=>(Number(t)||0)*s);return a?new Duration(...a):new Duration}if("object"==typeof t){const{years:e,months:i,weeks:s,days:a,hours:n,minutes:r,seconds:o,milliseconds:l}=t;return new Duration(e,i,s,a,n,r,o,l)}throw new RangeError("invalid duration")}static compare(t,e){const i=Date.now(),s=Math.abs(applyDuration(i,Duration.from(t)).getTime()-i),a=Math.abs(applyDuration(i,Duration.from(e)).getTime()-i);return s>a?-1:s<a?1:0}toLocaleString(t,e){return new DurationFormat(t,e).format(this)}};function applyDuration(t,e){const i=new Date(t);return i.setFullYear(i.getFullYear()+e.years),i.setMonth(i.getMonth()+e.months),i.setDate(i.getDate()+7*e.weeks+e.days),i.setHours(i.getHours()+e.hours),i.setMinutes(i.getMinutes()+e.minutes),i.setSeconds(i.getSeconds()+e.seconds),i}function elapsedTime(t,e="second",i=Date.now()){const s=t.getTime()-i;if(0===s)return new Duration;const a=Math.sign(s),n=Math.abs(s),r=Math.floor(n/1e3),o=Math.floor(r/60),l=Math.floor(o/60),m=Math.floor(l/24),h=Math.floor(m/30),u=Math.floor(h/12),d=unitNames.indexOf(e)||unitNames.length;return new Duration(d>=0?u*a:0,d>=1?(h-12*u)*a:0,0,d>=3?(m-30*h)*a:0,d>=4?(l-24*m)*a:0,d>=5?(o-60*l)*a:0,d>=6?(r-60*o)*a:0,d>=7?(n-1e3*r)*a:0)}function roundToSingleUnit(t,{relativeTo:e=Date.now()}={}){if(e=new Date(e),t.blank)return t;const i=t.sign;let s=Math.abs(t.years),a=Math.abs(t.months),n=Math.abs(t.weeks),r=Math.abs(t.days),o=Math.abs(t.hours),l=Math.abs(t.minutes),m=Math.abs(t.seconds),h=Math.abs(t.milliseconds);h>=900&&(m+=Math.round(h/1e3)),(m||l||o||r||n||a||s)&&(h=0),m>=55&&(l+=Math.round(m/60)),(l||o||r||n||a||s)&&(m=0),l>=55&&(o+=Math.round(l/60)),(o||r||n||a||s)&&(l=0),r&&o>=12&&(r+=Math.round(o/24)),!r&&o>=21&&(r+=Math.round(o/24)),(r||n||a||s)&&(o=0);const u=e.getFullYear();let d=e.getMonth();const c=e.getDate();return(r>=27||s+a&&r)&&(e.setDate(c+r*i),(a+=Math.abs(e.getFullYear()>=u?e.getMonth()-d:e.getMonth()-d-12))&&(r=0),d=e.getMonth()),r>=6&&(n+=Math.round(r/7)),(n||a||s)&&(r=0),n>=4&&(a+=Math.round(n/4)),(a||s)&&(n=0),(a>=11||s&&a)&&(e.setMonth(e.getMonth()+a*i),s+=Math.abs(u-e.getFullYear())),s&&(a=0),new Duration(s*i,a*i,n*i,r*i,o*i,l*i,m*i,h*i)}function getRelativeTimeUnit(t,e){const i=roundToSingleUnit(t,e);if(i.blank)return[0,"second"];for(const t of unitNames){if("millisecond"===t)continue;const e=i[`${t}s`];if(e)return[e,t]}return[0,"second"]}__name(Duration,"Duration"),__name(applyDuration,"applyDuration"),__name(elapsedTime,"elapsedTime"),__name(roundToSingleUnit,"roundToSingleUnit"),__name(getRelativeTimeUnit,"getRelativeTimeUnit");var _RelativeTimeElement_instances,_RelativeTimeElement_customTitle,_RelativeTimeElement_updating,_RelativeTimeElement_lang_get,_RelativeTimeElement_renderRoot,_RelativeTimeElement_getFormattedTitle,_RelativeTimeElement_resolveFormat,_RelativeTimeElement_getDurationFormat,_RelativeTimeElement_getRelativeFormat,_RelativeTimeElement_getDateTimeFormat,_RelativeTimeElement_onRelativeTimeUpdated,__classPrivateFieldGet2=function(t,e,i,s){if("a"===i&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!s:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?s:"a"===i?s.call(t):s?s.value:e.get(t)},__classPrivateFieldSet2=function(t,e,i,s,a){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!a)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!a:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?a.call(t,i):a?a.value=i:e.set(t,i),i},HTMLElement=globalThis.HTMLElement||null,emptyDuration=new Duration,microEmptyDuration=new Duration(0,0,0,0,0,1),RelativeTimeUpdatedEvent=class extends Event{constructor(t,e,i,s){super("relative-time-updated",{bubbles:!0,composed:!0}),this.oldText=t,this.newText=e,this.oldTitle=i,this.newTitle=s}};function getUnitFactor(t){if(!t.date)return 1/0;if("duration"===t.format||"elapsed"===t.format){const e=t.precision;if("second"===e)return 1e3;if("minute"===e)return 6e4}const e=Math.abs(Date.now()-t.date.getTime());return e<6e4?1e3:e<36e5?6e4:36e5}__name(RelativeTimeUpdatedEvent,"RelativeTimeUpdatedEvent"),__name(getUnitFactor,"getUnitFactor");var dateObserver=new class{constructor(){this.elements=new Set,this.time=1/0,this.timer=-1}observe(t){if(this.elements.has(t))return;this.elements.add(t);const e=t.date;if(e&&e.getTime()){const e=getUnitFactor(t),i=Date.now()+e;i<this.time&&(clearTimeout(this.timer),this.timer=setTimeout(()=>this.update(),e),this.time=i)}}unobserve(t){this.elements.has(t)&&this.elements.delete(t)}update(){if(clearTimeout(this.timer),!this.elements.size)return;let t=1/0;for(const e of this.elements)t=Math.min(t,getUnitFactor(e)),e.update();this.time=Math.min(36e5,t),this.timer=setTimeout(()=>this.update(),this.time),this.time+=Date.now()}},RelativeTimeElement=class extends HTMLElement{constructor(){super(...arguments),_RelativeTimeElement_instances.add(this),_RelativeTimeElement_customTitle.set(this,!1),_RelativeTimeElement_updating.set(this,!1),_RelativeTimeElement_renderRoot.set(this,this.shadowRoot?this.shadowRoot:this.attachShadow?this.attachShadow({mode:"open"}):this),_RelativeTimeElement_onRelativeTimeUpdated.set(this,null)}static define(t="relative-time",e=customElements){return e.define(t,this),this}static get observedAttributes(){return["second","minute","hour","weekday","day","month","year","time-zone-name","prefix","threshold","tense","precision","format","format-style","datetime","lang","title"]}get onRelativeTimeUpdated(){return __classPrivateFieldGet2(this,_RelativeTimeElement_onRelativeTimeUpdated,"f")}set onRelativeTimeUpdated(t){__classPrivateFieldGet2(this,_RelativeTimeElement_onRelativeTimeUpdated,"f")&&this.removeEventListener("relative-time-updated",__classPrivateFieldGet2(this,_RelativeTimeElement_onRelativeTimeUpdated,"f")),__classPrivateFieldSet2(this,_RelativeTimeElement_onRelativeTimeUpdated,"object"==typeof t||"function"==typeof t?t:null,"f"),"function"==typeof t&&this.addEventListener("relative-time-updated",t)}get second(){const t=this.getAttribute("second");if("numeric"===t||"2-digit"===t)return t}set second(t){this.setAttribute("second",t||"")}get minute(){const t=this.getAttribute("minute");if("numeric"===t||"2-digit"===t)return t}set minute(t){this.setAttribute("minute",t||"")}get hour(){const t=this.getAttribute("hour");if("numeric"===t||"2-digit"===t)return t}set hour(t){this.setAttribute("hour",t||"")}get weekday(){const t=this.getAttribute("weekday");return"long"===t||"short"===t||"narrow"===t?t:"datetime"===this.format&&""!==t?this.formatStyle:void 0}set weekday(t){this.setAttribute("weekday",t||"")}get day(){var t;const e=null!==(t=this.getAttribute("day"))&&void 0!==t?t:"numeric";if("numeric"===e||"2-digit"===e)return e}set day(t){this.setAttribute("day",t||"")}get month(){const t=this.format;let e=this.getAttribute("month");if(""!==e)return null!=e||(e="datetime"===t?this.formatStyle:"short"),"numeric"===e||"2-digit"===e||"short"===e||"long"===e||"narrow"===e?e:void 0}set month(t){this.setAttribute("month",t||"")}get year(){var t;const e=this.getAttribute("year");return"numeric"===e||"2-digit"===e?e:this.hasAttribute("year")||(new Date).getUTCFullYear()===(null===(t=this.date)||void 0===t?void 0:t.getUTCFullYear())?void 0:"numeric"}set year(t){this.setAttribute("year",t||"")}get timeZoneName(){const t=this.getAttribute("time-zone-name");if("long"===t||"short"===t||"shortOffset"===t||"longOffset"===t||"shortGeneric"===t||"longGeneric"===t)return t}set timeZoneName(t){this.setAttribute("time-zone-name",t||"")}get prefix(){var t;return null!==(t=this.getAttribute("prefix"))&&void 0!==t?t:"datetime"===this.format?"":"on"}set prefix(t){this.setAttribute("prefix",t)}get threshold(){const t=this.getAttribute("threshold");return t&&isDuration(t)?t:"P30D"}set threshold(t){this.setAttribute("threshold",t)}get tense(){const t=this.getAttribute("tense");return"past"===t?"past":"future"===t?"future":"auto"}set tense(t){this.setAttribute("tense",t)}get precision(){const t=this.getAttribute("precision");return unitNames.includes(t)?t:"micro"===this.format?"minute":"second"}set precision(t){this.setAttribute("precision",t)}get format(){const t=this.getAttribute("format");return"datetime"===t?"datetime":"relative"===t?"relative":"duration"===t?"duration":"micro"===t?"micro":"elapsed"===t?"elapsed":"auto"}set format(t){this.setAttribute("format",t)}get formatStyle(){const t=this.getAttribute("format-style");if("long"===t)return"long";if("short"===t)return"short";if("narrow"===t)return"narrow";const e=this.format;return"elapsed"===e||"micro"===e?"narrow":"datetime"===e?"short":"long"}set formatStyle(t){this.setAttribute("format-style",t)}get datetime(){return this.getAttribute("datetime")||""}set datetime(t){this.setAttribute("datetime",t)}get date(){const t=Date.parse(this.datetime);return Number.isNaN(t)?null:new Date(t)}set date(t){this.datetime=(null==t?void 0:t.toISOString())||""}connectedCallback(){this.update()}disconnectedCallback(){dateObserver.unobserve(this)}attributeChangedCallback(t,e,i){e!==i&&("title"===t&&__classPrivateFieldSet2(this,_RelativeTimeElement_customTitle,null!==i&&(this.date&&__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"m",_RelativeTimeElement_getFormattedTitle).call(this,this.date))!==i,"f"),__classPrivateFieldGet2(this,_RelativeTimeElement_updating,"f")||"title"===t&&__classPrivateFieldGet2(this,_RelativeTimeElement_customTitle,"f")||__classPrivateFieldSet2(this,_RelativeTimeElement_updating,(async()=>{await Promise.resolve(),this.update()})(),"f"))}update(){const t=__classPrivateFieldGet2(this,_RelativeTimeElement_renderRoot,"f").textContent||this.textContent||"",e=this.getAttribute("title")||"";let i=e;const s=this.date;if("undefined"==typeof Intl||!Intl.DateTimeFormat||!s)return void(__classPrivateFieldGet2(this,_RelativeTimeElement_renderRoot,"f").textContent=t);const a=Date.now();__classPrivateFieldGet2(this,_RelativeTimeElement_customTitle,"f")||(i=__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"m",_RelativeTimeElement_getFormattedTitle).call(this,s)||"")&&this.setAttribute("title",i);const n=elapsedTime(s,this.precision,a),r=__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"m",_RelativeTimeElement_resolveFormat).call(this,n);let o=t;(o="duration"===r?__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"m",_RelativeTimeElement_getDurationFormat).call(this,n):"relative"===r?__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"m",_RelativeTimeElement_getRelativeFormat).call(this,n):__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"m",_RelativeTimeElement_getDateTimeFormat).call(this,s))?__classPrivateFieldGet2(this,_RelativeTimeElement_renderRoot,"f").textContent=o:this.shadowRoot===__classPrivateFieldGet2(this,_RelativeTimeElement_renderRoot,"f")&&this.textContent&&(__classPrivateFieldGet2(this,_RelativeTimeElement_renderRoot,"f").textContent=this.textContent),o===t&&i===e||this.dispatchEvent(new RelativeTimeUpdatedEvent(t,o,e,i)),"relative"===r||"duration"===r?dateObserver.observe(this):dateObserver.unobserve(this),__classPrivateFieldSet2(this,_RelativeTimeElement_updating,!1,"f")}};__name(RelativeTimeElement,"RelativeTimeElement"),_RelativeTimeElement_customTitle=new WeakMap,_RelativeTimeElement_updating=new WeakMap,_RelativeTimeElement_renderRoot=new WeakMap,_RelativeTimeElement_onRelativeTimeUpdated=new WeakMap,_RelativeTimeElement_instances=new WeakSet,_RelativeTimeElement_lang_get=__name(function(){var t;return(null===(t=this.closest("[lang]"))||void 0===t?void 0:t.getAttribute("lang"))||this.ownerDocument.documentElement.getAttribute("lang")||"default"},"_RelativeTimeElement_lang_get"),_RelativeTimeElement_getFormattedTitle=__name(function(t){return new Intl.DateTimeFormat(__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"a",_RelativeTimeElement_lang_get),{day:"numeric",month:"short",year:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}).format(t)},"_RelativeTimeElement_getFormattedTitle"),_RelativeTimeElement_resolveFormat=__name(function(t){const e=this.format;if("datetime"===e)return"datetime";if("duration"===e)return"duration";if("elapsed"===e)return"duration";if("micro"===e)return"duration";if(("auto"===e||"relative"===e)&&"undefined"!=typeof Intl&&Intl.RelativeTimeFormat){const e=this.tense;if("past"===e||"future"===e)return"relative";if(1===Duration.compare(t,this.threshold))return"relative"}return"datetime"},"_RelativeTimeElement_resolveFormat"),_RelativeTimeElement_getDurationFormat=__name(function(t){const e=__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"a",_RelativeTimeElement_lang_get),i=this.format,s=this.formatStyle,a=this.tense;let n=emptyDuration;"micro"===i?(t=roundToSingleUnit(t),n=microEmptyDuration,("past"===this.tense&&-1!==t.sign||"future"===this.tense&&1!==t.sign)&&(t=microEmptyDuration)):("past"===a&&-1!==t.sign||"future"===a&&1!==t.sign)&&(t=n);const r=`${this.precision}sDisplay`;return t.blank?n.toLocaleString(e,{style:s,[r]:"always"}):t.abs().toLocaleString(e,{style:s})},"_RelativeTimeElement_getDurationFormat"),_RelativeTimeElement_getRelativeFormat=__name(function(t){const e=new Intl.RelativeTimeFormat(__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"a",_RelativeTimeElement_lang_get),{numeric:"auto",style:this.formatStyle}),i=this.tense;"future"===i&&1!==t.sign&&(t=emptyDuration),"past"===i&&-1!==t.sign&&(t=emptyDuration);const[s,a]=getRelativeTimeUnit(t);return"second"===a&&s<10?e.format(0,"second"):e.format(s,a)},"_RelativeTimeElement_getRelativeFormat"),_RelativeTimeElement_getDateTimeFormat=__name(function(t){const e=new Intl.DateTimeFormat(__classPrivateFieldGet2(this,_RelativeTimeElement_instances,"a",_RelativeTimeElement_lang_get),{second:this.second,minute:this.minute,hour:this.hour,weekday:this.weekday,day:this.day,month:this.month,year:this.year,timeZoneName:this.timeZoneName});return`${this.prefix} ${e.format(t)}`.trim()},"_RelativeTimeElement_getDateTimeFormat");var root="undefined"!=typeof globalThis?globalThis:window;try{root.RelativeTimeElement=RelativeTimeElement.define()}catch(t){if(!(root.DOMException&&t instanceof DOMException&&"NotSupportedError"===t.name||t instanceof ReferenceError))throw t}var relative_time_element_define_default=RelativeTimeElement,dist_default=RelativeTimeElement;export{relative_time_element_define_default as RelativeTimeElement,RelativeTimeUpdatedEvent,dist_default as default};
